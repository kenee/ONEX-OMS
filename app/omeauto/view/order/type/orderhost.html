<!--
  Copyright 2026 ShopeX (https://www.shopex.cn)

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<style>
    #con_m_d_type li {width:130px; font-size: 12px; float: left; overflow: hidden;margin-bottom: 15px;}
    #con_m_pan #pan_m_d_1, #con_m_pan #pan_m_d_2, #con_m_pan #pan_m_d_3 {position:static; float: none; clear: both; margin-top: 15px;}
</style>
<ul id="con_m_d_type">
    <li><label for="m_d_1"><input id="m_d_1" type="radio" name="type" value="all" <{if $init.content.type == 'all'}>checked<{/if}>/>所有达人订单</label></li>
    <li><label for="m_d_2"><input id="m_d_2" type="radio" name="type" value='assign' <{if $init.content.type == 'assign'}>checked<{/if}>/>指定达人订单</label></li>
</ul>
<br>
<br>
<br>
<div id="con_m_pan">
    <div id="pan_m_d_all"></div>
    <div id="pan_m_d_assign">
        <span style="color:red">*</span>达人ID：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <input id="title" type="text" name="author" placeholder="支持多个, 以逗号符分隔" <{if $init.content.type == 'assign'}>value="<{$init.content.author}>"<{/if}> >
        <br>
        <{help}><{t}>设置了达人ID同时也设置直播间ID，<br>两个条件间是“并且”的关系，<br>如果条件间互斥，则规则选出的订单为空<{/t}><{/help}>
        直播间ID：&nbsp;
        <input id="title" type="text" name="room" placeholder="支持多个, 以逗号符分隔" <{if $init.content.type == 'assign'}>value="<{$init.content.room}>"<{/if}> >
    </div>
</div>
<script>
    (function(){
        function getIndex() {
            var idx = -1;
            $$("#con_m_d_type input[type=radio]").each(function(item) {  
                if (item.checked) { 
                    idx = item.value;
                }
            });
            return idx; 
        } 
        
        function changeDetail() {
            var selectIndex = getIndex(); 
            console.log('-=-=-=-=-=');
            console.log(selectIndex);
            if (selectIndex == -1) {
                $('m_d_1').checked = true;
                selectIndex = 'all';
            }
            $$('#con_m_pan div').each(function(item){
                item.setStyle('display', 'none');
            });
            $('pan_m_d_'+selectIndex).setStyle('display', '');
        }
        
        changeDetail();
        
        $$("#con_m_d_type input[type=radio]").addEvent('change',function(){
            changeDetail();
        });
    })();
</script> 

